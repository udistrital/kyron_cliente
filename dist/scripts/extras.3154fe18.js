"use strict";for(var params={},queryString=location.hash.substring(1),regex=/([^&=]+)=([^&]*)/g,m;m=regex.exec(queryString);)params[decodeURIComponent(m[1])]=decodeURIComponent(m[2]);var req=new XMLHttpRequest,query="https://"+window.location.host+"?"+queryString;req.open("GET",query,!0),req.onreadystatechange=function(a){console.log(a),4===req.readyState&&(200===req.status?window.location=params.state:400===req.status&&window.alert("There was an error processing the token."))},angular.module("kyronApp").factory("token_service",["$location","$http","$localStorage",function(a,b,c){var d={local:c.$default(params),header:null,token:null,live_token:function(){return"undefined"==typeof d.local.id_token||null===d.local.id_token?!1:(d.header=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(d.local.id_token.split(".")[0])),d.token=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(d.local.id_token.split(".")[1])),!0)},logout:function(){d.token=null,c.$reset(),window.location=a.absUrl()}};return d}]),angular.module("kyronApp").factory("notificacion",["$websocket",function(a){var b=a("ws://localhost:8080/register?id=2&profile=admin"),c=[];b.onMessage(function(a){c.unshift(JSON.parse(a.data))});var d={id:-1,log:c,get:function(){b.send(JSON.stringify({action:"get"}))},no_vistos:function(){var a=0;return angular.forEach(d.log,function(b){b.viewed||(a+=1)}),a}};return d}]),angular.module("kyronApp").controller("menuCtrl",["$location","$http","$scope","token_service","notificacion","$translate",function(a,b,c,d,e,f){var g=[];c.language={es:"btn btn-primary btn-circle btn-outline active",en:"btn btn-primary btn-circle btn-outline"},c.notificacion=e,c.actual="",c.token_service=d,c.breadcrumb=[],c.menu_service=[{Id:1,Nombre:"Producción Académica",Url:"",Opciones:[{Id:1,Nombre:" Crear Producción Académica",Url:"crear_produccion_academica",Opciones:null},{Id:2,Nombre:" Editar Producción Académica",Url:"editar_produccion_academica",Opciones:null},{Id:3,Nombre:" Consultar Producción Académica",Url:"consultar_produccion_academica",Opciones:null},{Id:4,Nombre:" Validar Producción Académica",Url:"validar_produccion_academica",Opciones:null}]},{Id:1,Nombre:"Experiencia Laboral",Url:"",Opciones:[{Id:1,Nombre:" Crear Experiencia Laboral",Url:"crear_experiencia_laboral",Opciones:null},{Id:2,Nombre:" Editar Experiencia Laboral",Url:"editar_experiencia_laboral",Opciones:null},{Id:3,Nombre:" Consultar Experiencia Laboral",Url:"consultar_experiencia_laboral",Opciones:null}]},{Id:1,Nombre:"Experiencia Docente",Url:"",Opciones:[{Id:1,Nombre:" Crear Experiencia Docente",Url:"crear_experiencia_docente",Opciones:null},{Id:2,Nombre:" Editar Experiencia Docente",Url:"editar_experiencia_docente",Opciones:null},{Id:3,Nombre:" Consultar Experiencia Docente",Url:"consultar_experiencia_docente",Opciones:null}]},{Id:1,Nombre:"Distinciones",Url:"",Opciones:[{Id:1,Nombre:" Crear Distincion",Url:"crear_distincion",Opciones:null},{Id:2,Nombre:" Editar Distincion",Url:"editar_distincion",Opciones:null},{Id:3,Nombre:" Consultar Distinciones",Url:"consultar_distincion",Opciones:null}]},{Id:1,Nombre:"Formación Académica",Url:"",Opciones:[{Id:1,Nombre:" Crear Formación Académica",Url:"crear_formacion_academica",Opciones:null},{Id:2,Nombre:" Editar Formación Académica",Url:"editar_formacion_academica",Opciones:null},{Id:3,Nombre:" Consultar Formación Académica",Url:"consultar_formacion_academica",Opciones:null}]},{Id:1,Nombre:"Idioma",Url:"",Opciones:[{Id:1,Nombre:" Crear Idioma",Url:"crear_persona_idioma",Opciones:null},{Id:2,Nombre:" Editar Idioma",Url:"editar_persona_idioma",Opciones:null},{Id:3,Nombre:" Consultar Idioma",Url:"consultar_persona_idioma",Opciones:null}]},{Id:1,Nombre:"Investigacion",Url:"",Opciones:[{Id:1,Nombre:" Crear Investigacion",Url:"crear_investigacion",Opciones:null},{Id:2,Nombre:" Editar Investigacion",Url:"editar_investigacion",Opciones:null},{Id:3,Nombre:" Consultar Investigacion",Url:"consultar_investigacion",Opciones:null}]},{Id:2,Nombre:"nivel 1",Url:"url_nivel_1",Opciones:[{Id:3,Nombre:"nivel 2",Url:"url_nivel_2",Opciones:[{Id:7,Nombre:"nivel 3",Url:"url_nivel_3",Opciones:[{Id:8,Nombre:"nivel 4 about",Url:"about",Opciones:null}]}]}]}];var h=function(a,b){for(var c="",d=0;d<a.length;d++)null===a[d].Opciones?(c=b+" , "+a[d].Nombre,g.push({path:a[d].Url,padre:c.split(",")})):h(a[d].Opciones,b+","+a[d].Nombre);return c},i=function(){c.breadcrumb=[""];for(var a=0;a<g.length;a++)c.actual==="/"+g[a].path?c.breadcrumb=g[a].padre:"/"===c.actual&&(c.breadcrumb=[""])};h(c.menu_service,""),g.push({padre:["","Notificaciones","Ver Notificaciones"],path:"notificaciones"}),c.$on("$routeChangeStart",function(b,d){c.actual=a.path(),i(),console.log(b+d)}),c.changeLanguage=function(a){switch(f.use(a),a){case"es":c.language.es="btn btn-primary btn-circle btn-outline active",c.language.en="btn btn-primary btn-circle btn-outline";break;case"en":c.language.en="btn btn-primary btn-circle btn-outline active",c.language.es="btn btn-primary btn-circle btn-outline"}},function(a){a(document).ready(function(){a("ul.dropdown-menu [data-toggle=dropdown]").on("click",function(b){b.preventDefault(),b.stopPropagation(),a(this).parent().siblings().removeClass("open"),a(this).parent().toggleClass("open")})})}(jQuery)}]),angular.module("kyronApp").controller("footerCtrl",["$scope",function(a){a.enlaces_universitarios=[{nombre:"Transparencia",link:"#/"},{nombre:"Normatividad",link:"#/"},{nombre:"Trámites",link:"#/"},{nombre:"General",link:"#/"},{nombre:"Docente",link:"#/"},{nombre:"Académica Estudiantil ",link:"#/"},{nombre:"Derechos Pecuniarios",link:"#/"},{nombre:"Sistema de Notificaciones",link:"#/"},{nombre:"CSU",link:"#/"},{nombre:"PIGA",link:"#/"},{nombre:"Bitácora",link:"#/"},{nombre:"Noticias anterioresg",link:"#/"},{nombre:"Área de Red UDNet",link:"#/"},{nombre:"Administración PWI",link:"#/"}],a.copyright="© Copyright 1995 - 2017 - Todos los Derechos Reservados ...",a.map=[{nombre:"Preguntas Frecuentes",link:"#/"},{nombre:"Mapa del Porta",link:"#/"},{nombre:"Política de Privacidad",link:"#/"}]}]),angular.module("kyronApp").controller("NotificacionesCtrl",["$scope","notificacion",function(a,b){a.imagePath="images/yeoman.png",a.notificacion=b}]);var text_es={TITULO:"GENERATOR-OAS",MENSAJE_INICIAL:"Ahora puede comenzar con el desarrollo ..."},text_en={TITULO:"GENERATOR-OAS",MENSAJE_INICIAL:"Now get to start to develop ..."};angular.module("kyronApp").config(["$translateProvider",function(a){a.translations("es",text_es).translations("en",text_en),a.preferredLanguage("es"),a.useSanitizeValueStrategy("sanitizeParameters")}]),angular.module("kyronApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("kyronApp").factory("formacionAcademicaServices",["$http",function(a){var b="http://localhost:8080/v1/";return{get:function(c,d){return a.get(b+c+"/?"+d)},post:function(c,d){return a.post(b+c,d)},put:function(c,d,e){return a.put(b+c+"/"+d,e)},"delete":function(c,d){return a["delete"](b+c+"/"+d)}}}]),angular.module("kyronApp").controller("CrearFormacionAcademicaCtrl",["formacionAcademicaServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.id=123;var c=this;c.id=b.id,c.vista_previa=!1,c.formacion_academica={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"ProgramaId.NombrePrograma",displayName:"Programa",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"Titulo.Nombre",displayName:"Título",width:300},{field:"NombreProyecto",displayName:"Nombre Proyecto",width:500},{field:"AreaConocimiento",displayName:"Área de Conocimiento",width:200}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("formacion_academica",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})},e=function(){a.get("institucion","limit=0").then(function(a){c.institucion=a.data})},f=function(){a.get("programa","limit=0").then(function(a){c.programa=a.data})},g=function(){a.get("titulo","limit=0").then(function(a){c.titulo=a.data})};d(),e(),f(),g(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a},c.limpiar_seleccion=function(){c.vista_previa=!c.vista_previa,c.formacion_academica={}},c.guardar=function(){c.formacion_academica.PersonaId=c.id,c.formacion_academica.FechaDato=new Date,c.formacion_academica.Validacion=!1,c.formacion_academica.Vigente=!0,a.post("formacion_academica",c.formacion_academica).then(function(a){console.log(a),201===a.status?swal("Buen trabajo!","Añadió la formación con éxito","success"):swal("Ha ocurrido un error",a.data,"error"),c.limpiar_seleccion(),d()})}}]),angular.module("kyronApp").controller("EditarFormacionAcademicaCtrl",["formacionAcademicaServices","$rootScope","$scope",function(a,b,c){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var d=this;d.id=b.id,d.vista_previa=!1,d.formacion_actual=null,d.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"ProgramaId.NombrePrograma",displayName:"Programa",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"Titulo.Nombre",displayName:"Título",width:300},{field:"NombreProyecto",displayName:"Nombre Proyecto",width:500},{field:"AreaConocimiento",displayName:"Área de Conocimiento",width:200}]},d.gridOptions.multiSelect=!1;var e=function(){a.get("formacion_academica",$.param({query:"PersonaId:"+d.id+",Vigente:"+!0,limit:0})).then(function(a){d.gridOptions.data=a.data,console.log(d.gridOptions.data)})},f=function(){a.get("institucion","limit=0").then(function(a){d.institucion=a.data})},g=function(){a.get("programa","limit=0").then(function(a){d.programa=a.data})},h=function(){a.get("titulo","limit=0").then(function(a){d.titulo=a.data})};e(),f(),g(),h(),d.gridOptions.onRegisterApi=function(a){d.gridApi=a,a.selection.on.rowSelectionChanged(c,function(a){d.formacion_actual=a.entity,null!==d.formacion_actual&&(d.vista_previa=!0)})},d.limpiar_seleccion=function(){d.vista_previa=null},d.guardar=function(){0==d.formacion_actual.Validacion?(d.formacion_actual.FechaDato=new Date,a.put("formacion_academica",d.formacion_actual.Id,d.formacion_actual).then(function(a){"OK"===a.data&&(e(),swal("Buen trabajo!","Se editó correctamente!","success"),d.limpiar_seleccion())})):(swal("No se ha podido editar!","La información ya ha sido validada","error"),d.limpiar_seleccion())},d.eliminar=function(){swal({title:"Está seguro?",text:"No podrá revertir esto!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Eliminar"}).then(function(){d.formacion_actual.FechaDato=new Date,d.formacion_actual.Vigente=!1,a.put("formacion_academica",d.formacion_actual.Id,d.formacion_actual).then(function(a){"OK"===a.data?(e(),d.limpiar_seleccion(),swal("Eliminado!","El registro ha sido eliminado.","success")):swal("No ha podido ser eliminado!",a.data,"error")})})["catch"](swal.noop)}}]),angular.module("kyronApp").controller("ConsultarFormacionAcademicaCtrl",["formacionAcademicaServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=this;c.id=b.id,c.formacion_academica={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"ProgramaId.NombrePrograma",displayName:"Programa",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"Titulo.Nombre",displayName:"Título",width:300},{field:"NombreProyecto",displayName:"Nombre Proyecto",width:500},{field:"AreaConocimiento",displayName:"Área de Conocimiento",width:200}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("formacion_academica",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})};d(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a}}]),angular.module("kyronApp").controller("CrearExperienciaLaboralCtrl",["experienciaLaboralServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=this;c.id=b.id,c.vista_previa=!1,c.experiencia_laboral={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"Cargo",displayName:"Cargo",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("experiencia_laboral",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})},e=function(){a.get("institucion","limit=0").then(function(a){c.institucion=a.data})};d(),e(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a},c.limpiar_seleccion=function(){c.vista_previa=!c.vista_previa,c.experiencia_laboral={}},c.guardar=function(){c.experiencia_laboral.PersonaId=c.id,c.experiencia_laboral.FechaDato=new Date,c.experiencia_laboral.Validacion=!1,c.experiencia_laboral.Vigente=!0,a.post("experiencia_laboral",c.experiencia_laboral).then(function(a){console.log(a),201===a.status?(swal("Buen trabajo!","Añadió la formación con éxito","success"),d()):swal("Ha ocurrido un error",a.data,"error"),c.limpiar_seleccion()})}}]),angular.module("kyronApp").factory("experienciaLaboralServices",["$http",function(a){var b="http://localhost:8082/v1/";return{get:function(c,d){return a.get(b+c+"/?"+d)},post:function(c,d){return a.post(b+c,d)},put:function(c,d,e){return a.put(b+c+"/"+d,e)},"delete":function(c,d){return a["delete"](b+c+"/"+d)}}}]),angular.module("kyronApp").controller("EditarExperienciaLaboralCtrl",["experienciaLaboralServices","$rootScope","$scope",function(a,b,c){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var d=this;d.id=b.id,d.vista_previa=!1,d.experiencia_actual={},d.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"Cargo",displayName:"Cargo",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100}]},d.gridOptions.multiSelect=!1;var e=function(){a.get("experiencia_laboral",$.param({query:"PersonaId:"+d.id+",Vigente:"+!0,limit:0})).then(function(a){d.gridOptions.data=a.data,console.log(d.gridOptions.data)})},f=function(){a.get("institucion","limit=0").then(function(a){d.institucion=a.data})};e(),f(),d.gridOptions.onRegisterApi=function(a){d.gridApi=a,a.selection.on.rowSelectionChanged(c,function(a){d.experiencia_actual=a.entity,null!==d.experiencia_actual&&(d.vista_previa=!0)})},d.limpiar_seleccion=function(){d.vista_previa=null},d.guardar=function(){0==d.experiencia_actual.Validacion?(d.experiencia_actual.FechaDato=new Date,a.put("experiencia_laboral",d.experiencia_actual.Id,d.experiencia_actual).then(function(a){"OK"===a.data?swal("Buen trabajo!","Se editó correctamente!","success"):swal("No se ha podido editar!",a.data,"error"),d.limpiar_seleccion()})):(swal("No se ha podido editar!","La información ya ha sido validada","error"),d.limpiar_seleccion()),e()},d.eliminar=function(){swal({title:"Está seguro?",text:"No podrá revertir esto!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Eliminar"}).then(function(){d.experiencia_actual.FechaDato=new Date,d.experiencia_actual.Vigente=!1,a.put("experiencia_laboral",d.experiencia_actual.Id,d.experiencia_actual).then(function(a){"OK"===a.data?(e(),d.limpiar_seleccion(),swal("Eliminado!","El registro ha sido eliminado.","success")):swal("No ha podido ser eliminado!",a.data,"error")})})["catch"](swal.noop)}}]),angular.module("kyronApp").controller("ConsultarExperienciaLaboralCtrl",["experienciaLaboralServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=this;c.id=b.id,c.vista_previa=!1,c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"Cargo",displayName:"Cargo",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("experiencia_laboral",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})};d(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a}}]),angular.module("kyronApp").controller("CrearProduccionAcademicaCtrl",["produccionAcademicaServices","$rootScope","$scope","$timeout","uiGridConstants",function(a,b,c,d,e){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var f=this;f.id=b.id,f.vista_previa=!1,f.tr_produccion_academica={},f.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"TituloProduccion",displayName:"Titulo Producción",width:200},{field:"FechaProduccion",displayName:"Fecha Producción",width:200,cellFilter:'date:"yyyy-MM-dd"'},{field:"Pais",displayName:"País",width:100},{field:"Ciudad",width:100},{field:"SubtipoProduccionId.Nombre",displayName:"Subtipo Producción",width:300}]},f.gridOptions.multiSelect=!1;var g=function(){a.get("produccion_academica",$.param({query:"PersonaId:"+f.id+",Vigente:"+!0,limit:0})).then(function(a){f.gridOptions.data=a.data,console.log(f.gridOptions.data)})},h=function(){a.get("tipo_produccion","limit=0").then(function(a){f.tipo_produccion=a.data})},i=function(){a.get("subtipo_produccion","limit=0").then(function(a){f.subtipo_produccion=a.data})},j=function(){a.get("opcion_dato","limit=0").then(function(a){f.opcion_dato=a.data})},k=function(){a.get("dato_produccion",$.param({query:"ProduccionAcademicaId.PersonaId:"+f.id+",ProduccionAcademicaId.Vigente:"+!0,limit:0})).then(function(a){f.gridOptionsDatoSubtipo.data=a.data})};g(),h(),i(),j(),k(),f.gridOptions.onRegisterApi=function(a){f.gridApi=a},f.limpiar_seleccion=function(){f.vista_previa=!f.vista_previa,f.tr_produccion_academica={}},f.gridOptionsDatoSubtipo={},f.gridOptionsDatoSubtipo.enableFiltering=!0,f.gridOptionsDatoSubtipo.treeRowHeaderAlwaysVisible=!1,f.gridOptionsDatoSubtipo.columnDefs=[{field:"ProduccionAcademicaId.TituloProduccion",displayName:"Titulo Producción",cellTemplate:'<div ng-if="!col.grouping || col.grouping.groupPriority === undefined || col.grouping.groupPriority === null || ( row.groupHeader && col.grouping.groupPriority === row.treeLevel )" class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>',width:200},{field:"DatoSubtipoId.DatoId.Nombre",displayName:"Dato",width:300},{field:"Valor",headerCellClass:c.highlightFilteredHeader,cellFilter:"filtroDatoProduccion:this",width:300}],f.gridOptionsDatoSubtipo.onRegisterApi=function(a){d(function(){a.grouping.clearGrouping(),a.grouping.groupColumn("ProduccionAcademicaId.TituloProduccion"),a.core.notifyDataChange(e.dataChange.COLUMN)})},f.getDatoSubtipo=function(b){f.paramSubtipoProduccion=$.param({query:"SubtipoProduccion:"+b}),a.get("dato_subtipo",f.paramSubtipoProduccion).then(function(a){c.infoDatoSubtipo=a.data,c.infoInput=[],c.infoSelect=[];for(var b=0;b<c.infoDatoSubtipo.length;b++)switch(c.infoDatoSubtipo[b].Dominio=JSON.parse(c.infoDatoSubtipo[b].Dominio),c.infoDatoSubtipo[b].Dominio.Entrada){case"input":c.infoInput.push(c.infoDatoSubtipo[b]);break;case"select":c.infoSelect.push(c.infoDatoSubtipo[b])}})},f.guardar=function(){for(var b={Ciudad:c.ciudad,NumeroAutores:c.numeroAutores,Pais:c.pais,PersonaId:f.id,SubtipoProduccionId:{Id:c.subtipoProduccion},TituloProduccion:c.tituloProduccion,FechaProduccion:c.fechaProduccion,Validacion:!1,FechaDato:new Date,Vigente:!0},d=[],e=0;e<c.infoInput.length;e++)d.push({DatoSubtipoId:{Id:c.infoInput[e].Id},Valor:c.infoInput[e].Dominio.Valor.toString()});for(var h=0;h<c.infoSelect.length;h++)d.push({DatoSubtipoId:{Id:c.infoSelect[h].Id},Valor:c.infoSelect[h].Dominio.Valor.toString()});a.post("tr_produccion_academica",{ProduccionAcademica:b,DatoProduccion:d}).then(function(a){console.log(a),201===a.status?(swal("Buen trabajo!","Añadió la formación con éxito","success"),g(),k()):swal("Ha ocurrido un error",a.data,"error"),f.limpiar_seleccion()})}}]),angular.module("kyronApp").factory("produccionAcademicaServices",["$http",function(a){var b="http://localhost:8081/v1/";return{get:function(c,d){return a.get(b+c+"/?"+d)},post:function(c,d){return a.post(b+c,d)},put:function(c,d,e){return a.put(b+c+"/"+d,e)},"delete":function(c,d){return a["delete"](b+c+"/"+d)}}}]),angular.module("kyronApp").filter("filtroDatoProduccion",["produccionAcademicaServices",function(a){var b=[];return a.get("opcion_dato","").then(function(a){b=a.data}),function(a,c){var d=c.row.entity.DatoSubtipoId;try{var e=JSON.stringify(d);if(e.includes("input"))return a;if(e.includes("select")){for(var f=0,g=0;g<b.length;g++)b[g].Id==a&&(f=g);return b[f].NombreOpcion}}catch(h){}}}]),angular.module("kyronApp").controller("EditarProduccionAcademicaCtrl",["produccionAcademicaServices","$rootScope","$scope","$timeout","uiGridConstants",function(a,b,c,d,e){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var f=this;f.id=b.id,f.vista_previa=!1,f.tr_produccion_academica={},f.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"TituloProduccion",displayName:"Titulo Producción",width:200},{field:"FechaProduccion",displayName:"Fecha Producción",width:200,cellFilter:'date:"yyyy-MM-dd"'},{field:"Pais",displayName:"País",width:100},{field:"Ciudad",width:100},{field:"SubtipoProduccionId.Nombre",displayName:"Subtipo Producción",width:300}]},f.gridOptions.multiSelect=!1;var g=function(){a.get("produccion_academica",$.param({query:"PersonaId:"+f.id+",Vigente:"+!0,limit:0})).then(function(a){f.gridOptions.data=a.data,console.log(f.gridOptions.data)})},h=function(){a.get("tipo_produccion","limit=0").then(function(a){f.tipo_produccion=a.data})},i=function(){a.get("subtipo_produccion","limit=0").then(function(a){f.subtipo_produccion=a.data})},j=function(){a.get("opcion_dato","limit=0").then(function(a){f.opcion_dato=a.data})},k=function(){a.get("dato_produccion",$.param({query:"ProduccionAcademicaId.PersonaId:"+f.id+",ProduccionAcademicaId.Vigente:"+!0,limit:0})).then(function(a){f.gridOptionsDatoSubtipo.data=a.data})};g(),h(),i(),j(),k(),f.gridOptions.onRegisterApi=function(a){f.gridApi=a,a.selection.on.rowSelectionChanged(c,function(a){f.produccion_actual=a.entity,null!==f.experiencia_actual&&(f.vista_previa=!0)})},f.limpiar_seleccion=function(){f.vista_previa=!f.vista_previa,f.tr_produccion_academica={}},f.gridOptionsDatoSubtipo={},f.gridOptionsDatoSubtipo.enableFiltering=!0,f.gridOptionsDatoSubtipo.treeRowHeaderAlwaysVisible=!1,f.gridOptionsDatoSubtipo.columnDefs=[{field:"ProduccionAcademicaId.TituloProduccion",displayName:"Titulo Producción",cellTemplate:'<div ng-if="!col.grouping || col.grouping.groupPriority === undefined || col.grouping.groupPriority === null || ( row.groupHeader && col.grouping.groupPriority === row.treeLevel )" class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>',width:200},{field:"DatoSubtipoId.DatoId.Nombre",displayName:"Dato",width:300},{field:"Valor",headerCellClass:c.highlightFilteredHeader,cellFilter:"filtroDatoProduccion:this",width:300}],f.gridOptionsDatoSubtipo.onRegisterApi=function(a){d(function(){a.grouping.clearGrouping(),a.grouping.groupColumn("ProduccionAcademicaId.TituloProduccion"),a.core.notifyDataChange(e.dataChange.COLUMN)})},f.guardar=function(){0==f.produccion_actual.Validacion?(f.produccion_actual.FechaDato=new Date,a.put("produccion_academica",f.produccion_actual.Id,f.produccion_actual).then(function(a){"OK"===a.data?swal("Buen trabajo!","Se editó correctamente!","success"):swal("No se ha podido editar!",a.data,"error"),f.limpiar_seleccion()})):(swal("No se ha podido editar!","La información ya ha sido validada","error"),f.limpiar_seleccion()),g()},f.eliminar=function(){swal({title:"Está seguro?",text:"No podrá revertir esto!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Eliminar"}).then(function(){f.produccion_actual.FechaDato=new Date,f.produccion_actual.Vigente=!1,a.put("produccion_academica",f.produccion_actual.Id,f.produccion_actual).then(function(a){"OK"===a.data?(g(),k(),f.limpiar_seleccion(),swal("Eliminado!","El registro ha sido eliminado.","success")):swal("No ha podido ser eliminado!",a.data,"error")})})["catch"](swal.noop)}}]),angular.module("kyronApp").controller("ConsultarProduccionAcademicaCtrl",["produccionAcademicaServices","$rootScope","$scope","$timeout","uiGridConstants",function(a,b,c,d,e){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var f=this;f.id=b.id,f.vista_previa=!1,f.tr_produccion_academica={},f.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"TituloProduccion",displayName:"Titulo Producción",width:200},{field:"FechaProduccion",displayName:"Fecha Producción",width:200,cellFilter:'date:"yyyy-MM-dd"'},{field:"Pais",displayName:"País",width:100},{field:"Ciudad",width:100},{field:"SubtipoProduccionId.Nombre",displayName:"Subtipo Producción",width:300}]},f.gridOptions.multiSelect=!1;var g=function(){a.get("produccion_academica",$.param({query:"PersonaId:"+f.id+",Vigente:"+!0,limit:0})).then(function(a){f.gridOptions.data=a.data,console.log(f.gridOptions.data)})},h=function(){a.get("tipo_produccion","limit=0").then(function(a){f.tipo_produccion=a.data})},i=function(){a.get("subtipo_produccion","limit=0").then(function(a){f.subtipo_produccion=a.data})},j=function(){a.get("opcion_dato","limit=0").then(function(a){f.opcion_dato=a.data})},k=function(){a.get("dato_produccion",$.param({query:"ProduccionAcademicaId.PersonaId:"+f.id+",ProduccionAcademicaId.Vigente:"+!0,limit:0})).then(function(a){f.gridOptionsDatoSubtipo.data=a.data})};g(),h(),i(),j(),k(),f.gridOptions.onRegisterApi=function(a){f.gridApi=a},f.gridOptionsDatoSubtipo={},f.gridOptionsDatoSubtipo.enableFiltering=!0,f.gridOptionsDatoSubtipo.treeRowHeaderAlwaysVisible=!1,f.gridOptionsDatoSubtipo.columnDefs=[{field:"ProduccionAcademicaId.TituloProduccion",displayName:"Titulo Producción",cellTemplate:'<div ng-if="!col.grouping || col.grouping.groupPriority === undefined || col.grouping.groupPriority === null || ( row.groupHeader && col.grouping.groupPriority === row.treeLevel )" class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>',width:200},{field:"DatoSubtipoId.DatoId.Nombre",displayName:"Dato",width:300},{field:"Valor",headerCellClass:c.highlightFilteredHeader,cellFilter:"filtroDatoProduccion:this",width:300}],f.gridOptionsDatoSubtipo.onRegisterApi=function(a){d(function(){a.grouping.clearGrouping(),a.grouping.groupColumn("ProduccionAcademicaId.TituloProduccion"),a.core.notifyDataChange(e.dataChange.COLUMN)})}}]),angular.module("kyronApp").factory("experienciaDocenteServices",function(){var a=42;return{someMethod:function(){return a}}}),angular.module("kyronApp").factory("investigacionServices",["$http",function(a){var b="http://localhost:8080/v1/";return{get:function(c,d){return a.get(b+c+"/?"+d)},post:function(c,d){return a.post(b+c,d)},put:function(c,d,e){return a.put(b+c+"/"+d,e)},"delete":function(c,d){return a["delete"](b+c+"/"+d)}}}]),angular.module("kyronApp").controller("CrearDistincionCtrl",["distincionServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=this;c.id=b.id,c.vista_previa=!1,c.distincion={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"Nombre",displayName:"Nombre",width:200},{field:"Fecha",displayName:"Fecha",cellFilter:'date:"yyyy-MM-dd"',width:100}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("distincion",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})},e=function(){a.get("institucion","limit=0").then(function(a){c.institucion=a.data})};d(),e(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a},c.limpiar_seleccion=function(){c.vista_previa=!c.vista_previa,c.distincion={}},c.guardar=function(){c.distincion.PersonaId=c.id,c.distincion.FechaDato=new Date,c.distincion.Validacion=!1,c.distincion.Vigente=!0,a.post("distincion",c.distincion).then(function(a){console.log(a),201===a.status?(swal("Buen trabajo!","Añadió la formación con éxito","success"),d()):swal("Ha ocurrido un error",a.data,"error"),c.limpiar_seleccion()})}}]),angular.module("kyronApp").controller("EditarDistincionCtrl",["distincionServices","$rootScope","$scope",function(a,b,c){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var d=this;d.id=b.id,d.vista_previa=!1,d.distincion_actual={},d.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"Nombre",displayName:"Nombre",width:200},{field:"Fecha",displayName:"Fecha",cellFilter:'date:"yyyy-MM-dd"',width:100}]},d.gridOptions.multiSelect=!1;var e=function(){a.get("distincion",$.param({query:"PersonaId:"+d.id+",Vigente:"+!0,limit:0})).then(function(a){d.gridOptions.data=a.data,console.log(d.gridOptions.data)})},f=function(){a.get("institucion","limit=0").then(function(a){d.institucion=a.data})};e(),f(),d.gridOptions.onRegisterApi=function(a){d.gridApi=a,a.selection.on.rowSelectionChanged(c,function(a){d.distincion_actual=a.entity,null!==d.distincion_actual&&(d.vista_previa=!0)})},d.limpiar_seleccion=function(){d.vista_previa=null},d.guardar=function(){0==d.distincion_actual.Validacion?(d.distincion_actual.FechaDato=new Date,a.put("distincion",d.distincion_actual.Id,d.distincion_actual).then(function(a){"OK"===a.data?swal("Buen trabajo!","Se editó correctamente!","success"):swal("No se ha podido editar!",a.data,"error"),d.limpiar_seleccion()})):(swal("No se ha podido editar!","La información ya ha sido validada","error"),d.limpiar_seleccion()),e()},d.eliminar=function(){swal({title:"Está seguro?",text:"No podrá revertir esto!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Eliminar"}).then(function(){d.distincion_actual.FechaDato=new Date,d.distincion_actual.Vigente=!1,a.put("distincion",d.distincion_actual.Id,d.distincion_actual).then(function(a){"OK"===a.data?(e(),d.limpiar_seleccion(),swal("Eliminado!","El registro ha sido eliminado.","success")):swal("No ha podido ser eliminado!",a.data,"error");
})})["catch"](swal.noop)}}]),angular.module("kyronApp").controller("ConsultarDistincionCtrl",["distincionServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=this;c.id=b.id,c.vista_previa=!1,c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"Nombre",displayName:"Nombre",width:200},{field:"Fecha",displayName:"Fecha",cellFilter:'date:"yyyy-MM-dd"',width:100}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("distincion",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})};d(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a}}]),angular.module("kyronApp").factory("distincionServices",["$http",function(a){var b="http://localhost:8080/v1/";return{get:function(c,d){return a.get(b+c+"/?"+d)},post:function(c,d){return a.post(b+c,d)},put:function(c,d,e){return a.put(b+c+"/"+d,e)},"delete":function(c,d){return a["delete"](b+c+"/"+d)}}}]),angular.module("kyronApp").factory("personaIdiomaServices",["$http",function(a){var b="http://localhost:8084/v1/";return{get:function(c,d){return a.get(b+c+"/?"+d)},post:function(c,d){return a.post(b+c,d)},put:function(c,d,e){return a.put(b+c+"/"+d,e)},"delete":function(c,d){return a["delete"](b+c+"/"+d)}}}]),angular.module("kyronApp").controller("CrearPersonaIdiomaCtrl",["personaIdiomaServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.id=123;var c=this;c.id=b.id,c.vista_previa=!1,c.formacion_academica={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"Idioma.Nombre",displayName:"Idioma",width:200},{field:"NivelIdioma.NombreNivel",displayName:"Nivel",width:300}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("persona_idioma",$.param({query:"Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})},e=function(){a.get("idioma","limit=0").then(function(a){c.idioma=a.data})},f=function(){a.get("nivel_idioma","limit=0").then(function(a){c.nivel_idioma=a.data})};d(),e(),f(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a},c.limpiar_seleccion=function(){c.vista_previa=!c.vista_previa,c.persona_idioma={}},c.guardar=function(){c.persona_idioma.FechaDato=new Date,c.persona_idioma.Validacion=!1,c.persona_idioma.Vigente=!0,a.post("persona_idioma",c.persona_idioma).then(function(a){console.log(a),201===a.status?swal("Buen trabajo!","Añadió la formación con éxito","success"):swal("Ha ocurrido un error",a.data,"error"),c.limpiar_seleccion(),d()})}}]),angular.module("kyronApp").controller("ConsultarPersonaIdiomaCtrl",["personaIdiomaServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.id=123;var c=this;c.id=b.id,c.vista_previa=!1,c.persona_idioma={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"IdiomaId.Nombre",displayName:"Idioma",width:200},{field:"NivelIdioma.NombreNivel",displayName:"NivelIdioma",width:300}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("persona_idioma",$.param({query:"Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})};d(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a}}]),angular.module("kyronApp").controller("EditarPersonaIdiomaCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("kyronApp").controller("ValidarProduccionAcademicaCtrl",["produccionAcademicaServices","$rootScope","$scope","$timeout","uiGridConstants",function(a,b,c,d,e){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var f=this;f.id=b.id,f.vista_previa=!1,f.tr_produccion_academica={},f.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!1,enableRowHeaderSelection:!1,rowHeight:30,columnDefs:[{field:"TituloProduccion",displayName:"Titulo Producción",width:200},{field:"FechaProduccion",displayName:"Fecha Producción",width:200,cellFilter:'date:"yyyy-MM-dd"'},{field:"Pais",displayName:"País",width:100},{field:"Ciudad",width:100},{field:"SubtipoProduccionId.Nombre",displayName:"Subtipo Producción",width:300},{name:"Acción",width:65,cellEditableCondition:!1,cellTemplate:'  <div ng-if="row.entity.Validacion == false"> <button class="btn btn-success btn-sm" ng-click="grid.appScope.validarProduccionAcademica.validar(row.entity.Id, row.entity)"> <span class="glyphicon glyphicon-ok-sign"></span>Validar</button> </div>'}]},f.gridOptions.multiSelect=!1;var g=function(){a.get("produccion_academica",$.param({query:"PersonaId:"+f.id+",Vigente:"+!0,limit:0})).then(function(a){f.gridOptions.data=a.data,console.log(f.gridOptions.data)})},h=function(){a.get("dato_produccion",$.param({query:"ProduccionAcademicaId.PersonaId:"+f.id+",ProduccionAcademicaId.Vigente:"+!0,limit:0})).then(function(a){f.gridOptionsDatoSubtipo.data=a.data})};g(),h(),f.gridOptions.onRegisterApi=function(a){f.gridApi=a},f.gridOptionsDatoSubtipo={},f.gridOptionsDatoSubtipo.enableFiltering=!0,f.gridOptionsDatoSubtipo.treeRowHeaderAlwaysVisible=!1,f.gridOptionsDatoSubtipo.columnDefs=[{field:"ProduccionAcademicaId.TituloProduccion",displayName:"Titulo Producción",cellTemplate:'<div ng-if="!col.grouping || col.grouping.groupPriority === undefined || col.grouping.groupPriority === null || ( row.groupHeader && col.grouping.groupPriority === row.treeLevel )" class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>',width:200},{field:"DatoSubtipoId.DatoId.Nombre",displayName:"Dato",width:300},{field:"Valor",headerCellClass:c.highlightFilteredHeader,cellFilter:"filtroDatoProduccion:this",width:300}],f.gridOptionsDatoSubtipo.onRegisterApi=function(a){d(function(){a.grouping.clearGrouping(),a.grouping.groupColumn("ProduccionAcademicaId.TituloProduccion"),a.core.notifyDataChange(e.dataChange.COLUMN)})},f.validar=function(b,c){swal({title:"Está seguro?",text:"No podrá revertir esto!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Validar"}).then(function(){c.Validacion=!0,a.put("produccion_academica",b,c).then(function(a){"OK"===a.data?(swal("Buen trabajo!","Se validó correctamente!","success"),g()):swal("No se ha podido validar!",a.data,"error")})})}}]),angular.module("kyronApp").controller("ConsultarInvestigacionCtrl",["investigacionServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=this;c.id=b.id,c.investigacion={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"TipoInvestigacionId.NombreTipoInvestigacion",displayName:"Tipo Investigación",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"TipoInvestigacion",displayName:"Tipo Investigacion",width:300},{field:"NombreInvestigacion",displayName:"Nombre Investigacion",width:500}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("investigacion",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})};d(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a}}]),angular.module("kyronApp").controller("EditarInvestigacionCtrl",["investigacionServices","$rootScope","$scope",function(a,b,c){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var d=this;d.id=b.id,d.vista_previa=!1,d.investigacion_actual=null,d.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"TipoInvestigacionId.NombreTipoInvestigacion",displayName:"Tipo Investigación",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"TipoInvestigacion",displayName:"Tipo Investigacion",width:300},{field:"NombreInvestigacion",displayName:"Nombre Investigacion",width:500}]},d.gridOptions.multiSelect=!1;var e=function(){a.get("investigacion",$.param({query:"PersonaId:"+d.id+",Vigente:"+!0,limit:0})).then(function(a){d.gridOptions.data=a.data,console.log(d.gridOptions.data)})},f=function(){a.get("institucion","limit=0").then(function(a){d.institucion=a.data})},g=function(){a.get("tipo_investigacion","limit=0").then(function(a){d.tipo_investigacion=a.data})};e(),f(),g(),d.gridOptions.onRegisterApi=function(a){d.gridApi=a,a.selection.on.rowSelectionChanged(c,function(a){d.investigacion_actual=a.entity,null!==d.investigacion_actual&&(d.vista_previa=!0)})},d.limpiar_seleccion=function(){d.vista_previa=null},d.guardar=function(){d.investigacion_actual.FechaDato=new Date,a.put("investigacion",d.investigacion_actual.Id,d.investigacion_actual).then(function(a){"OK"===a.data&&(e(),swal("Buen trabajo!","Se editó correctamente!","success"),d.limpiar_seleccion())}),d.limpiar_seleccion()},d.eliminar=function(){swal({title:"Está seguro?",text:"No podrá revertir esto!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Eliminar"}).then(function(){d.investigacion_actual.FechaDato=new Date,d.investigacion_actual.Vigente=!1,a.put("investigacion",d.investigacion_actual.Id,d.investigacion_actual).then(function(a){"OK"===a.data?(e(),d.limpiar_seleccion(),swal("Eliminado!","El registro ha sido eliminado.","success")):swal("No ha podido ser eliminado!",a.data,"error")})})["catch"](swal.noop)}}]),angular.module("kyronApp").controller("CrearInvestigacionCtrl",["investigacionServices","$rootScope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.id=123;var c=this;c.id=b.id,c.vista_previa=!1,c.investigacion={},c.gridOptions={enableFiltering:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{field:"InstitucionId.NombreInstitucion",displayName:"Institución",width:400},{field:"TipoInvestigacionId.NombreTipoInvestigacion",displayName:"Tipo Investigación",width:200},{field:"FechaInicio",displayName:"Fecha Inicio",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"FechaFinalizacion",displayName:"Fecha Finalización",cellFilter:'date:"yyyy-MM-dd"',width:100},{field:"TipoInvestigacion",displayName:"Tipo Investigacion",width:300},{field:"NombreInvestigacion",displayName:"Nombre Investigacion",width:500}]},c.gridOptions.multiSelect=!1;var d=function(){a.get("investigacion",$.param({query:"PersonaId:"+c.id+",Vigente:"+!0,limit:0})).then(function(a){c.gridOptions.data=a.data,console.log(c.gridOptions.data)})},e=function(){a.get("institucion","limit=0").then(function(a){c.institucion=a.data})},f=function(){a.get("tipo_investigacion","limit=0").then(function(a){c.tipo_investigacion=a.data})};d(),e(),f(),c.gridOptions.onRegisterApi=function(a){c.gridApi=a},c.limpiar_seleccion=function(){c.vista_previa=!c.vista_previa,c.investigacion={}},c.guardar=function(){c.investigacion.PersonaId=c.id,c.investigacion.FechaDato=new Date,c.investigacion.Vigente=!0,a.post("investigacion",c.investigacion).then(function(a){console.log(a),201===a.status?swal("Buen trabajo!","Añadió la formación con éxito","success"):swal("Ha ocurrido un error",a.data,"error"),c.limpiar_seleccion(),d()})}}]);